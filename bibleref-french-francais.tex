\documentclass{ltxdoc}
\usepackage[utf8]{inputenc} 
\usepackage[french]{babel}
\usepackage[T1]{fontenc}
\usepackage{bibleref-french}
\usepackage{csquotes}
\usepackage[breaklinks=true,unicode=true]{hyperref}
\usepackage{longtable}

\begin{document}

\shorthandoff{:}
\title{Le package \textsf{bibleref-french}}
\author{Ma\"ieul Rouquette \\ \& \\ Rapha\"el Pinson \\ \texttt{raphink@gmail.com}}

\maketitle
\begin{abstract}
Le  package \textsf{bibleref-french} fournit une traduction français du package \textsf{bibleref}.
\end{abstract}

\tableofcontents
\section{Utilisation}

Ce package hérite des commandes du package \textsf{bibleref}. Voir la documentation du package \textsf{bibleref} pour l'usage général.

\subsection{Styles additionnels}

\textsf{bibleref-french} ajoute des styles ou en surcharge du package \textsf{bibleref} (comme par exemples les styles \textsf{default}, \textsf{jerusalem} et \textsf{text}.).

Les styles sont notés dans le tableau~\ref{tab:styles}.

\begin{table}[tbh]
\caption{Styles de citation bibliques  (peuvent être utilisés comme options de  packages ou comme argument de  \cs{biblerefstyle})}
\label{tab:styles}
\vspace{10pt}
\begin{center}
\input{styles}
\end{center}
\end{table}

\subsection{Noms catholique ou protestant des livres}

Un livre de l'ancien Testament s'appelle Isaïe chez les catholiques et Esaïe chez les protestants.
Pour cette raison ce package fournit deux options supplémentaires :  \textsf{catholic} (ou \textsf{catholique}) et \textsf{protestant}. 

L'option \textsf{catholic} ne fait habituellement rien, puisque c'est l'option par défaut. Cependant, appeler  \verb!\brfullname@catholic! fournira un résumé de tous les noms catholiques de livres.

Tant \verb|\brfullname@catholic| que \verb|\brfullname@protestant| peuvent être utilisés en remplacement à  \verb|brefullname| dans les définitions de styles pour forcer à utiliser l'un ou l'autre des schémas de nommage.

Notez que le style \verb|TOB| utilise les noms catholiques, sauf pour le libre d'Esaïe qui est surchargé.

Au moment du chargement, le schéma de nommage peut être surchargé pour un style donné. Par exemple le style \verb|jerusalem| utilise \verb|\brfullname@catholic| mais vous pouvez utiliser \verb|\usepackage[jerusalem,protestant]{bibleref-french}| pour avoir le style \verb|jerusalem| avec les livres de la Bible Protestante.

Il en est de même pour \verb|brabbrvname| et les commandes dérivées.

\subsection{Liste des livres}

\def\abreviation{Abréviation}
\def\livre{Livre}
Voici la liste des livres avec leurs abréviations :

\input{livres}

\subsection{Espaces insécables}

Le manuel de l'\emph{Imprimerie Nationale} expose que les nombres ne devraient pas être séparés des textes avec lesquelles ils vont. Pour cette raison, ce package utilise des espaces insécables dans les cas suivants :
\begin{itemize}
\item Entre le nombre et le nom quand le nom d'un livre contient un nombre (par ex. 2 Corinthiens) ;
\item Entre le nom du livre et le numéro de chapitre ;
\item Après un tiret demi-cadratin (--) dans un intervalle de versets.

\end{itemize}

Bien que cela soit généralement mieux, cela peut produire des lignes dépassantes en longueur quand une longue référence biblique termine une ligne.
Pour cette raison le package fournit une commande \cs{BRallowhypbch} pour autoriser les fins de ligne entre le nom du livre et le numéro de chapitre dans une référence biblique.
La commande \cs{BRforbidhypbch} restaure les espaces insécables entre le nom du livre et le numéro de chapitre.

Si vous avez besoin de résoudre un dépassement d'une ligne finissante avec un long verset biblique et qu'il n'y a pas d'autres possibilités que d'autoriser la séparation entre le nom du livre et le numéro de chapitre, il est recommandé d'utiliser \cs{BRallowhypbch} dans un environnement qui contient le paragraphe problématique.

\section{Tri dans l'index}
Le package \verb|bibleref| autorise à choisir l'ordre des livres pour générer un index des références bibliques.

Cependant il utilise le nom complet des livres pour les trier, ce qui est problématique en français à cause des accents dans les noms.

Pour résoudre cela, ce package modifie \verb|bibleref| pour utiliser les abréviations à la place des noms complets.
 
En conséquence, \cs{biblerefmap} doit être utilisé avec les \emph{exactes} chaînes de caractères utilisés dans les commandes \cs{ibibleref}. Par exemple, si vous utilisez \verb|\ibibleref{Jn}(3:16)|, vous devrez déclarer \verb|\biblerefmap{Jn}{43}| à la place de \verb|\biblerefmap{Jean}{43}|


 Si vous utilisez la commande \cs{ibibleref}, vous pouvez constatez que l'ordre de tri dans l'index n'est par défaut pas très bon. Par exemple, livres numérotés sont classés à la lettre `i'. 

Le package fournit des options pour un meilleur tri. Au chargement du package, vous pouvez choisir l'une de ces options :
 \begin{description}
 \item[indexalphac]les livres sont triés par ordre alphabétique, suivant les noms catholiques.
\item[indexalphap]les livres sont triés par ordre alphabétique, suivant les noms protestants.
\item[indextestamentsc]les livres sont triés dans l'ordre des bibles catholiques classiques, pour l'ancien Testament  selon la Septante chrétienne. Ancien et Nouveau Testaments forment deux sections.
\item[indexcatho]les livres sont triés dans l'ordre des bibles catholiques classiques, pour l'ancien Testament  selon la Septante chrétienne. Anciens et Nouveau Testaments ne sont pas séparés.
\item[indextestamentsp]les livres sont triés dans l'ordre des bibles protestantes classiques, pour l'ancien Testament  selon la bible hébraïque. Ancien et Nouveau Testaments forment deux sections.
\item[indexprot]les livres sont triés dans l'ordre des bibles catholiques classiques, pour l'ancien Testament  selon la bible hébraïque. Anciens et Nouveau Testaments ne sont pas séparés.
\item[indexBHS]les livres de la biblique hébraïque sont triés selon les bibles hébraïques classiques. La Torah, les Nebiim et les Ketouvim sont dans la même section. Les Deutérocanoniques et les Livres du Nouveau Testament ne sont pas triés.
\item[indexTanak]les livres de la biblique hébraïque sont triés selon les bibles hébraïques classiques. La Torah, les Nebiim et les Ketouvim sont dans trois sections distinctes. Les Deutérocanoniques et les Livres du Nouveau Testament ne sont pas triés.
\end{description}

\subsection{Nom des parties de la Bible}
Il est possible de renommer le nom des parties de la Bible. Par exemple \enquote{Torah} en \enquote{Loi}.
Pour ce faire, vous devez redéfinir, avec  \cs{renewcommand} l'une ou plus de ces commandes :
 \begin{itemize}
 \item \cs{Torah} ;
 \item \cs{Nebiim} ;
 \item \cs{Ketouvim} ;
 \item \cs{AT};
 \item \cs{NT}.
\end{itemize}
\section{Problèmes connus}

\subsection{Noms de livre dans le style  \textsf{text}}

Le style \verb|text| doit être redéfinie pour prendre en considération les spécificités du français. Le tableau~\ref{tab:textspec} liste ces spécificités.

\begin{table}[tbh]
\caption{Spécificités françaises dans les noms de livres, avec les problèmes actuels en emphase} 
\label{tab:textspec}
\vspace{10pt}
\begin{center}
\begin{tabular}{lp{0.5\textwidth}}
\bfseries Anglais & \bfseries Français\\
Book of Genesis & Livre \emph{de la} Gen\`ese\\
Book of Exodus & Livre \emph{de l'}Exode\\
Book of Deuteronomy & Livre \emph{du} Deut\'eronome\\
Book of Numbers & Livre \emph{des} Nombres\\
Book of Acts & Livre \emph{des} Actes des Ap\^otres\\
Book of Revelations & Livre \emph{de l'}Apocalypse\\
\end{tabular}
\end{center}
\end{table}
\end{document}
